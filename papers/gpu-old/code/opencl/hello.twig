device_id = getDeviceId();
context = createContext(device_id);
commands = createCommandQueue(device_id, context);
kernel = compileProgram(&KernelSource, device_id, context);
input = createFloatBuffer(context, DATA_SIZE);
output = createFloatBuffer(context, DATA_SIZE);
copyFloatsToDevice(commands, input, data, DATA_SIZE);
runKernel(device_id, kernel, commands, input, output, DATA_SIZE);
clFinish(commands);
copyFloatsFromDevice(commands, output, results, count);

getDeviceId = [() -> deviceId]

createContext = [deviceId -> context]

createQueue = [(deviceId,context) -> queue]

createKernel = [(string,deviceId,context) -> kernel]

createFloatBuffer = [(context,int) -> gpu(array(float))]
