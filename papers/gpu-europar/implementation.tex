%!TEX root = twig-gpu.tex

\section{Implementation}

Our implementation of Twig is written in Haskell. Twig expects as input a \texttt{.twig} file containing a list of named rule expressions along with a \texttt{main} rule expression, as described in Sec.~\ref{sec:names}. It also expects an initial value (i.e. a term, representing a C type), which will be used as the input to the main rule expression. Twig must also be configured with a mapping from terms to C types. Currently, this mapping is provided with a simple key/value text file.

Generated code may optionally be wrapped in a C function body, with parameters corresponding to the inputs, and return value corresponding to the output. The generated code may be redirected to a separate file and included in a C program using an \texttt{\#include} directive.
