%!TEX root = twig-gpu.tex

\section{Related Work}

Twig was inspired in part by Fig\cite{fig}. In that project, a similar formal approach was used to express bindings between different programming languages. In our experience, multi-language programming has much in common with programming hybrid systems. The overlaps include memory ownership and management, data marshaling, and managing the flow of program control across the language or device boundary. Our work builds upon the approach in Fig, and in particular aims to provide a general-purpose tool not tied to the Moby\cite{moby} programming language.

Numerous systems have been created in recent years that provide an abstraction above low-level interfaces such as OpenCL or CUDA. These include the PGI Accelerate model\cite{pgi-accelerate}, the HMPP programming system\cite{hmpp}, and Offload\cite{offload}. Interestingly, Offload, like Twig, uses locations encoded in the type system. While these systems provide an effective high-level abstraction, they offer little room for tuning the low-level interface to the accelerator. Twig provides a simple method for user-definable rewriting of programs, which allows architecture-, domain-, and even application-specific optimizations to be realized.

Furthermore, in large applications it is infeasible to assume that all developers of the various components will use the same high-level abstraction. This makes program composition challenging, since it may be unclear how the objects generated by independent programming systems interacts. Twig adopts a code generation approach in which a single, low-level target (such as CUDA) is used. This approach solves the composability problem, since all Twig code maps to a single ``lingua franca'' for programming the hybrid system.

Sequoia\cite{sequoia} is a language and runtime system for programming hybrid computers. It allows programmers to explicitly manage the memory hierarchy, while retaining program portability across architectures. Although Sequoia is based on C++, it is intended as a complete programming environment, not as a way to extend existing programs with hybrid computation.

Code generation approaches have had notable success in the computational science field, an exemplar being the Tensor Contraction Engine (TCE)\cite{baumgartner05synthesis}. The TCE allows computational chemists to write tensor contraction operations in a high level language, and then generates the corresponding collections of loops that implement the operations. Unlike Twig, the TCE is quite specialized, being of use only to programmers working with tensor-based computations.
