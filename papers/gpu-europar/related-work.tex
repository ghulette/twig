%!TEX root = twig-gpu.tex

\section{Related Work}

Numerous systems have been created in recent years that provide an abstraction above low-level interfaces such as OpenCL or CUDA. These include the PGI Accelerate model\cite{pgi-accelerate} and the HMPP programming system\cite{hmpp}. While both of these systems provide an effective high-level abstraction, they offer little room for tuning the low-level interface to the accelerator. Twig provides a simple method for user-definable rewriting of programs, which allows architecture-, domain- and even application-specific optimizations to be realized.

Furthermore, in large applications it is infeasible to assume that all developers of the various components will use the same high-level abstraction. This makes program composition challenging, since it may be unclear how the objects generated by independent programming systems interacts. Twig adopts a code generation approach in which a single, low-level target (such as CUDA) is used. This approach solves the composability problem, since all Twig code maps to a single ``lingua franca'' for programming the hybrid system.

Twig was inspired in part by FIG\cite{fig}. In that project, a similar formal approach was used to express bindings between different programming languages. In our experience, multi-language programming has much in common with programming hybrid systems. The overlaps include memory ownership and management, data marshalling, and managing the flow of program control across the language or device boundary. Our work builds upon the approach in Fig, and in particular aims to provide a general-purpose tool not tied to the Moby\cite{moby} programming language.

Kennedy's \emph{telescoping languages} work is related to ours in that it seeks to support high-level programming by deferring challenging problems to automated tools. In particular, telescoping languages provide the ability to build domain-specific languages using scripting languages to coordinate functionality in domain-specific libraries\cite{kennedy01telescoping}. The strategy used to optimize these programs is quite similar in some ways to our approach with reductions (see Sec.~\ref{sec:reductions}).

Code generation approaches have had notable success in the computational science field, an exemplar being the Tensor Contraction Engine (TCE)\cite{baumgartner05synthesis}. The TCE allows computational chemists to write tensor contraction operations in a high level language, and then generates the corresponding collections of loops that implement the operations. Unlike Twig, the TCE is quite specialized, being of use only to programmers working with tensor-based computations.

% Also mention: Sequoia, Offload
