-- Here are the "out" typemaps, expressed in Twig

unpackd = [polard -> (double,double)] <<<
  $out1 = $in.r;
  $out2 = $in.theta;
>>>

unpackf = [polarf -> (float,float)] <<<
  $out1 = $in.r;
  $out2 = $in.theta;
>>>

f2d = [float -> double] <<<
  $out = (double)$in;
>>>

unpack = (unpackf;{f2d,f2d}) | unpackd

polarToX = [(double,double) -> double] <<<
  $out = $in1 * cos($in2);  
>>>

polarToY = [(double,double) -> double] <<<
  $out = $in1 * sin($in2);
>>>

polarToCart = &1(1,1);{polarToX,polarToY}

d2py = [double -> pydouble] <<<
  $out = PyFloat_FromDouble($in);
>>>

mkpytuple = [(pydouble,pydouble) -> pytuple(pydouble,pydouble)] <<<
  $out = PyTuple_Pack(2,$in1,$in2);
>>>

pack = {d2py,d2py};mkpytuple

convert = unpack;polarToCart;pack
